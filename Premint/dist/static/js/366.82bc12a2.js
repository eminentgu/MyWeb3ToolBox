"use strict";(self["webpackChunkwinktool"]=self["webpackChunkwinktool"]||[]).push([[366],{6481:function(e,t,l){l.d(t,{$l:function(){return d},Hy:function(){return i},WT:function(){return s},kC:function(){return a},kV:function(){return r},oW:function(){return u},wi:function(){return n},wv:function(){return c}});var o=l(4054);function a(e){return o.Z.get("/nftkit-web-premint-server/index/lists",e)}function n(e){return o.Z.get("/nftkit-web-premint-server/index/item",e)}function r(e){return o.Z.post("/nftkit-web-premint-server/index/item",e)}function d(e){return o.Z["delete"]("/nftkit-web-premint-server/index/item",e)}function i(e){return o.Z.post("/nftkit-web-premint-server/index/item/twitter",e)}function u(e){return o.Z.post("/nftkit-web-premint-server/index/item/register",e)}function c(e){return o.Z.post("/nftkit-web-premint-server/index/item/status",e)}function s(e){return o.Z.post("/nftkit-web-premint-server/index/item/discord",e)}},2091:function(e,t,l){l.r(t),l.d(t,{default:function(){return D}});var o=l(8222),a=l(9669),n=l.n(a),r=l(5452),d=l.n(r),i=l(2966),u=l(6603),c=l(150),s=l(2201),m=l(6481);const p=(0,o.createElementVNode)("div",{class:"crumbs"},[(0,o.createElementVNode)("span",{class:"title"},"编辑抽奖")],-1),f=(0,o.createTextVNode)("推特"),V=(0,o.createTextVNode)("喜欢和转推"),w=(0,o.createTextVNode)("Discord"),x=(0,o.createTextVNode)("钱包余额"),_=(0,o.createTextVNode)("回答问题"),k=(0,o.createTextVNode)("其他"),h={class:"twitters"},N=["onClick"],v=(0,o.createTextVNode)("增加链接"),C=(0,o.createTextVNode)("加入"),y=(0,o.createTextVNode)("获得"),b=(0,o.createTextVNode)(" role "),g=(0,o.createTextVNode)(" ETH"),T=(0,o.createTextVNode)(" ETH"),B=(0,o.createTextVNode)(" 禁用 "),U=(0,o.createTextVNode)(" 启用 "),Z=(0,o.createTextVNode)(" 保存 ");var E=(0,o.defineComponent)({__name:"item",setup(e){const t=(0,s.yj)(),l=t.params.id;let a=(0,o.ref)({id:"",title:"",link:"",description:"",price:"",total_supply:"",winners:"",followers:"",members:"",condition:[],displayorder:0,twitters:[],discord:{link:"",role:""},balance:"",other:"",like_retweet_link:"",custom_field:"",status:1});async function r(){if(!d().empty(a.value.link)){const e=await n().post("http://localhost:3000/premint",{url:a.value.link});if(0===e.data.code){let t=e.data.data||{};a.value.title=t.title,a.value.winners=t.winners,a.value.followers=t.followers,a.value.price=t.price,a.value.total_supply=t.total_supply,a.value.members=t.members,a.value.condition=[],a.value.twitters=[],a.value.discord={link:"",role:""},a.value.balance="",a.value.other="",a.value.like_retweet_link="",a.value.custom_field="",d().empty(t.twitters)||a.value.condition.push("twitter"),d().empty(t.like_retweet_link)||a.value.condition.push("like_retweet"),a.value.twitters=t.twitters,a.value.like_retweet_link=t.like_retweet_link,d().empty(t.discord_link)&&d().empty(t.discord_role)||a.value.condition.push("discord"),a.value.discord={link:t.discord_link,role:t.discord_role},d().empty(t.balance)||a.value.condition.push("balance"),a.value.balance=t.balance,d().empty(t.custom_field)||(a.value.condition.push("custom_field"),t.custom_field.toLocaleLowerCase().includes("email")&&(a.value.custom_field=t.custom_field))}else(0,i.z8N)({type:"error",message:e.data.message})}}function E(e){console.log(e),e.includes("twitter")||(a.value.twitters=[]),e.includes("discord")||(a.value.discord={link:"",role:""}),e.includes("balance")||(a.value.balance=""),e.includes("other")||(a.value.other=""),e.includes("like_retweet")||(a.value.like_retweet_link=""),e.includes("custom_field")||(a.value.custom_field="")}function z(){a.value.twitters.push("")}function D(e){a.value.twitters.splice(e,1)}const F=(0,o.ref)(!0);async function H(){if(d().empty(a.value.title))return(0,i.z8N)({type:"error",message:"请填写抽奖名称！"});if(d().empty(a.value.link))return(0,i.z8N)({type:"error",message:"请填写抽奖链接！"});if(!d().empty(a.value.condition)&&a.value.condition.includes("custom_field")&&d().empty(a.value.custom_field))return(0,i.z8N)({type:"error",message:"请填写需要回答问题的答案！"});if(F.value){F.value=!1;const e=await(0,m.kV)(a.value);F.value=!0,0===e.code?(a.value.id=e.data.id,(0,i.z8N)({type:"success",message:e.message}),a.value={id:"",title:"",link:"",description:"",price:"",total_supply:"",winners:"",followers:"",members:"",condition:[],displayorder:0,twitters:[],discord:{link:"",role:""},balance:"",other:"",like_retweet_link:"",custom_field:"",status:1}):(0,i.z8N)({type:"error",message:e.message})}else(0,i.z8N)({type:"error",message:"提交保存中，请勿多次点击！"})}async function L(){const e=await(0,m.wi)({params:{id:l}});0===e.code&&(a.value=e.data||{},console.log("detail",a.value))}return(0,o.onMounted)((async()=>{console.log("onMounted"),d().empty(l)||0==l||await L()})),(e,t)=>{const l=(0,o.resolveComponent)("el-input"),n=(0,o.resolveComponent)("el-form-item"),d=(0,o.resolveComponent)("el-checkbox"),i=(0,o.resolveComponent)("el-checkbox-group"),s=(0,o.resolveComponent)("el-button"),m=(0,o.resolveComponent)("el-col"),F=(0,o.resolveComponent)("el-radio"),L=(0,o.resolveComponent)("el-radio-group"),M=(0,o.resolveComponent)("el-form"),W=(0,o.resolveComponent)("el-card");return(0,o.openBlock)(),(0,o.createElementBlock)(o.Fragment,null,[(0,o.createVNode)(o.Transition,null,{default:(0,o.withCtx)((()=>[((0,o.openBlock)(),(0,o.createBlock)(o.KeepAlive,null,[(0,o.createVNode)(u.Z)],1024))])),_:1}),(0,o.createVNode)(c.Z,null,{default:(0,o.withCtx)((()=>[p,(0,o.createVNode)(W,{shadow:"never"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(M,{"label-width":"80px"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(n,{label:"抽奖链接",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).link,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,o.unref)(a).link=e)},{append:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",{onClick:r},"获取数据")])),_:1},8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"抽奖名称",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).title,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,o.unref)(a).title=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"抽奖描述",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).description,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,o.unref)(a).description=e),type:"textarea"},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"奖品数量",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).winners,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,o.unref)(a).winners=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"Mint价",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).price,"onUpdate:modelValue":t[4]||(t[4]=e=>(0,o.unref)(a).price=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"NFT数量",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).total_supply,"onUpdate:modelValue":t[5]||(t[5]=e=>(0,o.unref)(a).total_supply=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"推特粉丝",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).followers,"onUpdate:modelValue":t[6]||(t[6]=e=>(0,o.unref)(a).followers=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"DC粉丝",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).members,"onUpdate:modelValue":t[7]||(t[7]=e=>(0,o.unref)(a).members=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"抽奖条件",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(i,{modelValue:(0,o.unref)(a).condition,"onUpdate:modelValue":t[8]||(t[8]=e=>(0,o.unref)(a).condition=e),onChange:E},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(d,{label:"twitter"},{default:(0,o.withCtx)((()=>[f])),_:1}),(0,o.createVNode)(d,{label:"like_retweet"},{default:(0,o.withCtx)((()=>[V])),_:1}),(0,o.createVNode)(d,{label:"discord"},{default:(0,o.withCtx)((()=>[w])),_:1}),(0,o.createVNode)(d,{label:"balance"},{default:(0,o.withCtx)((()=>[x])),_:1}),(0,o.createVNode)(d,{label:"custom_field"},{default:(0,o.withCtx)((()=>[_])),_:1}),(0,o.createVNode)(d,{label:"other"},{default:(0,o.withCtx)((()=>[k])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.unref)(a).condition.includes("twitter")?((0,o.openBlock)(),(0,o.createBlock)(n,{key:0,label:"关注推特",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createElementVNode)("div",h,[((0,o.openBlock)(!0),(0,o.createElementBlock)(o.Fragment,null,(0,o.renderList)((0,o.unref)(a).twitters,((e,t)=>((0,o.openBlock)(),(0,o.createBlock)(l,{key:t,modelValue:(0,o.unref)(a).twitters[t],"onUpdate:modelValue":e=>(0,o.unref)(a).twitters[t]=e},{prepend:(0,o.withCtx)((()=>[(0,o.createTextVNode)((0,o.toDisplayString)(`推特链接${t+1}`),1)])),append:(0,o.withCtx)((()=>[(0,o.createElementVNode)("span",{onClick:e=>D(t)},"删除",8,N)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),128)),(0,o.createVNode)(s,{class:"add-btn",type:"success",text:"",size:"small",onClick:z},{default:(0,o.withCtx)((()=>[v])),_:1})])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.unref)(a).condition.includes("like_retweet")?((0,o.openBlock)(),(0,o.createBlock)(n,{key:1,label:"推文链接",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).like_retweet_link,"onUpdate:modelValue":t[9]||(t[9]=e=>(0,o.unref)(a).like_retweet_link=e)},null,8,["modelValue"])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.unref)(a).condition.includes("discord")?((0,o.openBlock)(),(0,o.createBlock)(n,{key:2,label:"DC要求",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(m,{span:11},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).discord.link,"onUpdate:modelValue":t[10]||(t[10]=e=>(0,o.unref)(a).discord.link=e)},{prepend:(0,o.withCtx)((()=>[C])),_:1},8,["modelValue"])])),_:1}),(0,o.createVNode)(m,{span:12,offset:1,class:"text-center"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).discord.role,"onUpdate:modelValue":t[11]||(t[11]=e=>(0,o.unref)(a).discord.role=e)},{prepend:(0,o.withCtx)((()=>[y])),append:(0,o.withCtx)((()=>[b])),_:1},8,["modelValue"])])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.unref)(a).condition.includes("balance")?((0,o.openBlock)(),(0,o.createBlock)(n,{key:3,label:"余额要求",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).balance,"onUpdate:modelValue":t[12]||(t[12]=e=>(0,o.unref)(a).balance=e)},{append:(0,o.withCtx)((()=>[g])),_:1},8,["modelValue"])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.unref)(a).condition.includes("custom_field")?((0,o.openBlock)(),(0,o.createBlock)(n,{key:4,label:"回答问题",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).custom_field,"onUpdate:modelValue":t[13]||(t[13]=e=>(0,o.unref)(a).custom_field=e),type:"textarea"},null,8,["modelValue"])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.unref)(a).condition.includes("other")?((0,o.openBlock)(),(0,o.createBlock)(n,{key:5,label:"其他要求",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).other,"onUpdate:modelValue":t[14]||(t[14]=e=>(0,o.unref)(a).other=e),type:"textarea"},{append:(0,o.withCtx)((()=>[T])),_:1},8,["modelValue"])])),_:1})):(0,o.createCommentVNode)("",!0),(0,o.createVNode)(n,{label:"抽奖排序",style:{width:"800px"}},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(l,{modelValue:(0,o.unref)(a).displayorder,"onUpdate:modelValue":t[15]||(t[15]=e=>(0,o.unref)(a).displayorder=e)},null,8,["modelValue"])])),_:1}),(0,o.createVNode)(n,{label:"状态"},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(L,{modelValue:(0,o.unref)(a).status,"onUpdate:modelValue":t[16]||(t[16]=e=>(0,o.unref)(a).status=e)},{default:(0,o.withCtx)((()=>[(0,o.createVNode)(F,{label:0},{default:(0,o.withCtx)((()=>[B])),_:1}),(0,o.createVNode)(F,{label:1},{default:(0,o.withCtx)((()=>[U])),_:1})])),_:1},8,["modelValue"])])),_:1}),(0,o.createVNode)(n,null,{default:(0,o.withCtx)((()=>[(0,o.createVNode)(s,{type:"primary",onClick:H},{default:(0,o.withCtx)((()=>[Z])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})],64)}}});const z=E;var D=z}}]);