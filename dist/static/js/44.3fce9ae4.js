"use strict";(self["webpackChunkwinktool"]=self["webpackChunkwinktool"]||[]).push([[44],{3203:function(e,t,n){n.d(t,{No:function(){return u},Rt:function(){return l},gS:function(){return i},mp:function(){return c},s:function(){return a},tL:function(){return s},xJ:function(){return r}});var o=n(4054);function r(e){return o.Z.post("/nftkit-web-account-server/index/signin",e)}function s(e){return o.Z.get("/nftkit-web-account-server/index/twitterLogin",e)}function c(e){return o.Z.post("/nftkit-web-account-server/index/twitterLoginCallback",e)}function i(e){return o.Z.get("/nftkit-web-account-server/index/userInfo",e)}function u(e){return o.Z.get("/nftkit-web-account-server/index/twitterDisconnect",e)}function a(e){return o.Z.post("/nftkit-web-account-server/index/email",e)}function l(e){return o.Z.post("/nftkit-web-account-server/index/notification",e)}},4054:function(e,t,n){var o=n(9669),r=n.n(o),s=n(3824),c=n(5982);const i=(0,c.Z)(),u=r().create({baseURL:"https://www.winktool.com",timeout:6e4,responseType:"json"});u.interceptors.request.use((e=>{const t=i.token,n=i.refreshToken;return t&&(e.headers["x-web-token"]=t),n&&(e.headers["x-web-refresh-token"]=n),e}),(e=>Promise.reject(e))),u.interceptors.response.use((e=>(console.log("res",e),401===e.data.status&&(console.log("需要登录"),s.Z.push("/account/signin")),e.data)),(e=>{console.log("onError",e.response);const t=parseInt(e.response&&e.response.status);e.response&&e.response.data&&e.response.data.data;return 401!==t&&20001!==t||(console.log("需要登录",s.Z),s.Z.push("/account/signin")),Promise.reject(e)})),t["Z"]=u},3744:function(e,t){t.Z=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n}},2044:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var o=n(8222),r=n(5452),s=n.n(r),c=n(5982),i=n(2201),u=n(3203);const a={class:"main-container"},l={key:0,class:"wait-container","element-loading-text":"正在操作..."},f=(0,o.createTextVNode)("关闭本页"),d=(0,o.createTextVNode)("关闭本页");var p=(0,o.defineComponent)({__name:"success",setup(e){(0,o.getCurrentInstance)();const t=(0,i.yj)(),n=(0,c.Z)(),r=(0,o.ref)(!0),p=t.query.code,k=t.query.state;const w=(0,o.ref)("success");async function v(){if(console.log(n,n.codeVerifier),s().empty(p))w.value="error";else{let e=await(0,u.mp)({code:p,state:k,codeVerifier:n.codeVerifier});if(r.value=!1,console.log("response",e),0===e.code){w.value="success";let e=await(0,u.gS)();0===e.code&&(n.set_token(e.data.token),n.set_refreshToken(e.data.refreshToken),n.set_userInfo(e.data.userInfo)),setTimeout((()=>{let e=nw.Window.get();e.close()}),2e3)}else w.value="error"}}function m(){let e=nw.Window.get();e.close()}return(0,o.onMounted)((async()=>{console.log("onMounted"),await v()})),(e,t)=>{const n=(0,o.resolveComponent)("el-button"),s=(0,o.resolveComponent)("el-result"),c=(0,o.resolveDirective)("loading");return(0,o.openBlock)(),(0,o.createElementBlock)("div",a,[r.value?(0,o.withDirectives)(((0,o.openBlock)(),(0,o.createElementBlock)("div",l,null,512)),[[c,r.value]]):(0,o.createCommentVNode)("",!0),"success"==w.value?((0,o.openBlock)(),(0,o.createBlock)(s,{key:1,icon:"success",title:"操作成功","sub-title":"你可以点击下方按钮关闭本页"},{extra:(0,o.withCtx)((()=>[(0,o.createVNode)(n,{type:"primary",onClick:m},{default:(0,o.withCtx)((()=>[f])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0),"error"==w.value?((0,o.openBlock)(),(0,o.createBlock)(s,{key:2,icon:"error",title:"操作失败","sub-title":"你可以点击下方按钮关闭本页然后重试一次"},{extra:(0,o.withCtx)((()=>[(0,o.createVNode)(n,{type:"primary",onClick:m},{default:(0,o.withCtx)((()=>[d])),_:1})])),_:1})):(0,o.createCommentVNode)("",!0)])}}}),k=n(3744);const w=(0,k.Z)(p,[["__scopeId","data-v-3d2e0da0"]]);var v=w}}]);